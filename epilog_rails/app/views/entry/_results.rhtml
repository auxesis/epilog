<div id="results">

<table>
  
<% if @entries.size > 0 %>
  <tr>
    <% if @entries.class != Array %>
    Total Results: <b><%= @entries.total_hits %></b>,
    Viewing: <b><%= @pages.current.first_item %> - <%= @pages.current.last_item %></b>
    <% end %>
  </tr>
  <tr>
    <th class="message">Message</th>
    <th class="datetime">Timestamp</th>
  </tr>

  <% for entry in @entries %>
  <tr>
    <td>
      <%= h(entry.message) %>
    </td>
    <td>
      <%= h(entry.datetime) %>
    </td>
    <td>
      <%= link_to_remote "Show", 
                         :update => "details-" + entry.id.to_s, 
                         :position => :before,
                         :url => { :action => "show", 
                                   :id => entry.id, 
                                   :layout => false 
                                   },
                         :loading => toggle("details-" + entry.id.to_s)
      %>
    </td>
  </tr>

  <div id="details-<%=h entry.id.to_s %>">
  </div>
  <% end %>
  
<% else %>
  Sorry, I couldn't find anything that matched your query.
<% end %>

</table>

</div>

<center> 
  <%= link_to_remote 'Previous', :update => "ajax", :url => { :action => "query", :page => @pages.current.previous, :query => @query } if @pages.current.previous %>
  <%= link_to_remote 'Next', :update => "ajax", :url => { :action => "query", :page => @pages.current.next, :query => @query } if @pages.current.next %>
</center>

